name: run-tests-on-push
on: push
jobs:
  run-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4 #there are different versions of the actions/checkout action
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'
          architecture: 'x64'
      - name: Install Dependencies
        run: |
          python -m pip install --upgrade pip
          python -m pip install pytest
          python -m pip install pandas
          python -m pip install plotly
          python -m pip install pytest-cov
          python -m pip install pyqt5
      - name: Execute tests and generate report
        #The current issue apears to be caused by a permissions issue, so this is a lazy fix to see if the workflow won't error out.
        run: |
          chmod -R 777 /* 
          python -m pytest --junitxml="junit/test-results_`date '+%Y-%m-%d_%T'`.xml" --cov=com --cov-report=xml --cov-report=html
          
      #TODO: 
        #create dir for test results
        #merge decison based on pass/fail